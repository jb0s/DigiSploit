import { DigilinoQuestion } from "../DigilinoQuestion.js";
import { InteractionContext } from "../../InteractionContext.js";

export class DigilinoOpenQuestion extends DigilinoQuestion {
    revealAnswer(interaction: InteractionContext) {
        // Get the input field from the iframe.
        let inputField = interaction.interactionContainer.querySelector("iframe").contentDocument.body;

        // Get the child element that contains the answer.
        let answerElement = interaction.interactionContainer.querySelector("#plselfScoreFeedback > div.plselfScoreFeedbackAnswer.clearfix");

        // Export the answer from that element.
        let answer = answerElement["innerText"];
        let answerHTML = answer.split("\n").map(line => `<p>${line}</p>`).join("\n");

        if (inputField.getAttribute("contenteditable") !== "false") {
            inputField.innerHTML = answerHTML;
        }
    }
}