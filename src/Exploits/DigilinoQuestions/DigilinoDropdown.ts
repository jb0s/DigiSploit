import { DigilinoQuestion } from "../DigilinoQuestion.js";
import { InteractionContext } from "../../InteractionContext.js";

export class DigilinoDropdown extends DigilinoQuestion {
    revealAnswer(interaction: InteractionContext) {
        for(let i = 0; i < interaction.interaction.templateData.dropdownItems.length; i++) {
            let dropQuestions = interaction.interaction.templateData.dropdownItems[i].dropQuestion;

            for(let j = 0; j < dropQuestions.length; j++) {
                if(dropQuestions[j].type === "dropdownBox") {
                    let question = dropQuestions[j];
                    let dropdownElement = document.getElementById(question.guid);

                    for(let k = 0; k < question.dropOptions.length; k++) {
                        if(question.dropOptions[k].iscorrect === true) {
                            let correctId = question.dropOptions[k].correct;
                            let dropOptionElements = dropdownElement.getElementsByClassName("dropOption") as any;

                            for(let l = 0; l < dropOptionElements.length; l++) {
                                if(dropOptionElements[l].getAttribute("data-id") === correctId) {
                                    dropOptionElements[l].click();
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}